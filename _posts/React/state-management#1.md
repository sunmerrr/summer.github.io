---
title: "가볍게 읽는 리엑트 상태관리"
excerpt: "상태관리가 필요한 이유와 상태 종류(방법을 알려주지는 않는다)"

categories:
  - React
tags:
  - [react, javascript, state, state management, hooks, useState, useEffect, useLayout, useCallback, useMemo]

toc: true
toc_sticky: true
 
date: 2023-03-14
last_modified_at: 2023-03-14
---

### 상태관리가 뭔가요
- 리엑트에서 우리가 흔히 쓰던 hooks 중에 useState가 state와 setState를 return하는 함수이다. 우리는 setState로 state의 값을 설정/변경 해주고 해당 값을 사용할때는 state를 가져다 쓴다. 여기서 사용하던 state가 바로 상태이다.(단어 자체의 의미가 상태인데 너무 당연한 말을 한건가..)</br>

### 상태관리가 필요한 이유
- state 잘못 관리하면 data값을 올바른 곳에 내려주지 못하거나 제대로된 데이터 업데이트가 되지 않고, UI에 올바르지 않은 정보를(또는 오래된 데이터를) 띄우게 된다. 이런 것들을 방지하기 위해서 상태관리가 필요한 것이다. 즉, 상태관리는 정적인 데이터 보다는 *동적 데이터를 관리한다* 라고 할 수 있을 것 같다.    
예를 들어 state(상태)를 최상위 컴포넌트에 정의했다고 치자. 최상위 컴포넌트는 나와 증조부모 정도 되는 관계이다. 내 자식은 state를 요구한다. 필요한 state를 넘겨주기 위해 증조부모에서 조부모에게, 조부모에서 부모에게, 부모에서 나에게, 나에서 자식에게 state가 전달이 되었다. 시간이 지나서 이 자식에게 또 다른 state값도 필요해 졌다. 귀찮아진 나는 그냥 state를 내 컴포넌트에 새로 작성하고 전달해 주었다. 갑작스럽게 자식에게 전달한 state값이 문제가 되었다. 하지만 나는 내가 직접 전달해준 state가 문제인 것인지 증조부모로 부터 내려받은 state가 문제인 것인지 알 수가 없다.     
예시로는 증조부와 내 자식이라는 심플한 관계였지만 실무에서는 더 아래로, 또는 더 위로 올라갈 수 있고, 훨씬 많은 자식들에게 state를 뿌려줘야 할 수도 있다. 이렇듯 state는 제대로 관리하지 못하면 어떤 상태값이 에러가 났는지, 이 컴포넌트에 전달된 state값이 어디서부터 온건지 추적하기 어려워 진다.

### 상태의 종류
- 전역 상태: 전역으로 관리되고 업데이트, 캐싱하는 state이다.
- 지역 상태: 컴포넌트 안에서 선언되어져서 해당 컴포넌트와 해당 컴포넌트의 자식 컴포넌트까지만 영향을 끼치는 state이다.

### 상태관리를 하는 방법
1. state를 컴포넌트 안에 선언한다.
1. 해당 state를 통해서 변화해야하는 UI와 가깝게 배치한다.
1. setState를 통해서만 state 값을 변경한다.